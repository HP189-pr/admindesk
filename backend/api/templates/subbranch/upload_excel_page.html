{% extends "admin/base_site.html" %}
{% load static %}

{% block content %}
<h1>{{ title }}</h1>

<!-- Download Sample File -->
<p>
    <a href="{{ download_url }}" class="button">Download Sample File</a>
</p>

<!-- Upload Form -->
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" name="upload_preview" class="button">Upload & Preview</button>
</form>

<!-- Preview Section -->
{% if preview %}
    <h2>Preview Data</h2>
    <form method="post">
        {% csrf_token %}
        <table class="adminlist">
            <thead>
                <tr>
                    {% for col in preview.columns %}
                        <th>{{ col }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in preview.rows %}
                    <tr>
                        {% for cell in row %}
                            <td>{{ cell }}</td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        <br>
        <button type="submit" name="confirm" class="button">Confirm Upload</button>
    </form>
{% endif %}

{% endblock %}
